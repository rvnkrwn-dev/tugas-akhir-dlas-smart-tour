@import "tailwindcss";

/* ===== PANNELLUM HOTSPOT SYSTEM ===== */

/* Base Hotspot Container */
/* CRITICAL: Pannellum 2.5.6 uses .pnlm-hotspot-base for custom tooltip hotspots! */
.pnlm-hotspot,
.pnlm-hotspot-base {
    cursor: pointer;
    transition: transform 0.2s ease, z-index 0s;
    display: flex !important;
    align-items: center;
    justify-content: center;
    overflow: visible !important;
    position: absolute !important;
    z-index: 50;
}

.pnlm-hotspot:hover,
.pnlm-hotspot-base:hover {
    z-index: 100 !important;
}

/* Tooltip & Cards Container */
.hotspot-tooltip,
.hotspot-card {
    position: absolute;
    bottom: calc(100% + 8px);
    /* Position above hotspot with small gap */
    left: 50%;
    transform: translateX(-50%) translateY(-8px);
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    z-index: 200;
}

.hotspot-card {
    transition-delay: 1s;
    /* Delay hiding ONLY for Loket cards */
}

/* Hover State - MUST target both classes */
/* Hover State OR Force Show - MUST target both classes */
.pnlm-hotspot:hover .hotspot-tooltip,
.pnlm-hotspot:hover .hotspot-card,
.pnlm-hotspot-base:hover .hotspot-tooltip,
.pnlm-hotspot-base:hover .hotspot-card,
.pnlm-hotspot.force-show .hotspot-tooltip,
.pnlm-hotspot.force-show .hotspot-card,
.pnlm-hotspot-base.force-show .hotspot-tooltip,
.pnlm-hotspot-base.force-show .hotspot-card {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
    pointer-events: auto;
    z-index: 999 !important;
    transition-delay: 0s;
    /* Show immediately */
    /* Ensure focused hotspot is on top */
}

/* Keep tooltip visible when hovering over it */
.hotspot-tooltip:hover,
.hotspot-card:hover {
    opacity: 1;
    pointer-events: auto;
}

/* Simple Tooltip */
.hotspot-tooltip.simple-tooltip {
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(8px);
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    white-space: nowrap;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Rich Card (Loket) */
.hotspot-card {
    background: white;
    border-radius: 16px;
    padding: 16px;
    width: 240px;
    max-width: calc(100vw - 40px);
    box-shadow: 0 12px 40px -8px rgba(0, 0, 0, 0.4);
    border: 1px solid #e5e7eb;
    text-align: center;
    color: #1f2937;
    cursor: default;
    left: 50%;
    right: auto;
    /* overflow: hidden; - Removed to prevent shadow clipping */
    /* Ensure proper box model */
    box-sizing: border-box;
}

/* Card info container */
.hotspot-card-info {
    display: flex;
    flex-direction: column;
    gap: 6px;
    width: 100%;
}

/* Adjust card position when near viewport edges */
@media (max-width: 640px) {
    .hotspot-card {
        width: 220px;
        left: 50%;
        transform: translateX(-50%) translateY(-8px);
    }

    .pnlm-hotspot:hover .hotspot-card,
    .pnlm-hotspot-base:hover .hotspot-card {
        transform: translateX(-50%) translateY(0);
    }
}

.hotspot-card h4 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 6px;
    line-height: 1.3;
    color: #111827;
    /* Prevent text overflow */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.hotspot-card .price {
    font-size: 16px;
    color: #059669;
    font-weight: 800;
    margin-bottom: 10px;
}

.hotspot-btn-add {
    width: 100%;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    color: white;
    border: none;
    margin-top: 4px;
    padding: 10px 12px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(5, 150, 105, 0.3);
    /* Prevent button from overflowing */
    max-width: 100%;
    box-sizing: border-box;
}

.hotspot-btn-add:hover {
    background: linear-gradient(135deg, #047857 0%, #065f46 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4);
}

.hotspot-btn-add.success {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
}

/* ===== BASE HOTSPOT STYLES ===== */
/* Target both .pnlm-hotspot and .pnlm-hotspot-base */
.pnlm-hotspot.pano-hotspot,
.pnlm-hotspot-base.pano-hotspot {
    width: 28px;
    height: 28px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.98);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 0 0 2px rgba(255, 255, 255, 0.1);
    cursor: pointer;
    position: absolute !important;
    z-index: 50;
    transition: transform .25s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow .25s ease;
    display: flex !important;
    align-items: center;
    justify-content: center;
}

.pnlm-hotspot.pano-hotspot:hover,
.pnlm-hotspot-base.pano-hotspot:hover {
    transform: scale(1.25);
    box-shadow: 0 8px 28px rgba(0, 0, 0, 0.5), 0 0 0 3px rgba(255, 255, 255, 0.2);
    z-index: 100 !important;
}

/* ===== ICON VIA ::BEFORE ===== */
.pnlm-hotspot.pano-hotspot::before,
.pnlm-hotspot-base.pano-hotspot::before {
    content: '';
    position: absolute;
    inset: 0;
    margin: auto;
    width: 65%;
    height: 65%;
    background-color: currentColor;
    -webkit-mask-size: contain;
    mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
}

/* ===== INFO HOTSPOT ===== */
.pano-hotspot--info {
    background: rgba(59, 130, 246, 0.95) !important;
    color: white;
}

.pano-hotspot--info::before {
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z' /%3E%3C/svg%3E");
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z' /%3E%3C/svg%3E");
}

/* ===== LOKET HOTSPOT ===== */
.pano-hotspot--loket {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
    color: white;
}

.pano-hotspot--loket::before {
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z' /%3E%3C/svg%3E");
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z' /%3E%3C/svg%3E");
}

/* ===== NAVIGATE HOTSPOT ===== */
.pano-hotspot--navigate {
    background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%) !important;
    color: white;
}

.pano-hotspot--navigate::before {
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2.5' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M13 7l5 5m0 0l-5 5m5-5H6' /%3E%3C/svg%3E");
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2.5' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M13 7l5 5m0 0l-5 5m5-5H6' /%3E%3C/svg%3E");
}

/* ===== PULSE ANIMATION (PREMIUM FEEL) ===== */
.pnlm-hotspot.pano-hotspot::after,
.pnlm-hotspot-base.pano-hotspot::after {
    content: '';
    position: absolute;
    inset: -10px;
    border-radius: 999px;
    background: currentColor;
    opacity: 0.3;
    animation: hotspot-pulse 2.5s ease-out infinite;
    z-index: -1;
    pointer-events: none;
}

@keyframes hotspot-pulse {
    0% {
        transform: scale(0.7);
        opacity: 0.6;
    }

    100% {
        transform: scale(1.6);
        opacity: 0;
    }
}

/* Custom Hotspot Class (from usePannellum) */
.custom-hotspot {
    /* Ensure custom hotspots inherit base styles */
    z-index: 50;
}

.custom-hotspot:hover {
    z-index: 100 !important;
}

/* Force Show Parent Z-Index */
.pnlm-hotspot.force-show,
.pnlm-hotspot-base.force-show {
    z-index: 999 !important;
}